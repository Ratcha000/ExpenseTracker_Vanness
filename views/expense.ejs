<%- include('partials/header') %>

<h2>บันทึกรายจ่าย</h2>

<form action="/expense" method="POST">
  <input type="text" name="title" placeholder="ใช้เงินทำอะไร" required>
  <input type="number" name="amount" placeholder="จำนวนเงิน" required>

  <select name="category" required>
    <% categories.forEach(cat => { %>
      <option value="<%= cat._id %>"><%= cat.name %></option>
    <% }) %>
  </select>

  <button type="submit">บันทึก</button>
</form>

<hr>

<h3>เพิ่มหมวดหมู่</h3>
<form action="/category" method="POST">
  <input type="text" name="name" placeholder="ชื่อหมวดหมู่">
  <button type="submit">เพิ่ม</button>
</form>

<hr>

<h2>รายการค่าใช้จ่าย</h2>
<table border="1">
  <tr>
    <th>รายการ</th>
    <th>จำนวน</th>
    <th>หมวดหมู่</th>
    <th>วันที่</th>
  </tr>
  <% expenses.forEach(e => { %>
    <tr>
      <td><%= e.title %></td>
      <td><%= e.amount %></td>
      <td><%= e.category ? e.category.name : '-' %></td>
      <td><%= e.createdAt.toLocaleString() %></td>
    </tr>
  <% }) %>
</table>

<%- include('partials/footer') %>
